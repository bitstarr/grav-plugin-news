{% spaceless %}

{# GENERIC SETTINGS #}
{% set current_page = uri.param('page')|default(1)|int %}
{% set limit = config.plugins.news.news_per_page|int %}
{% set start = (current_page - 1) * limit %}

{% set search = uri.param('search') %}
{% if search %}
    {% set collection = collection.search(search) %}
{% endif %}

{% set count = collection|length %}
{% set collection_slice = collection.limit(start, limit) %} {# this is your pagination #}

{% endspaceless %}

{# render collection using flex templates #}
{# {% render collection layout: 'json' with {x: x, y: y, count: count} %} #}
{% render collection_slice %}